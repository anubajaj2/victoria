sap.ui.define(["victoria/controller/BaseController","sap/ui/model/json/JSONModel","sap/ui/core/routing/History","victoria/models/formatter","sap/m/MessageToast","sap/ui/model/Filter","sap/m/MessageBox"],function(e,t,a,r,s,i,o){"use strict";var n;return e.extend("victoria.controller.Print",{onInit:function(){e.prototype.onInit.apply(this);var t=this.getRouter();t.getRoute("Print").attachMatched(this._onRouteMatched,this);var a=this;var r=this.getModel("local").getProperty("/CurrentUser");var s=this.getModel("local").oData.AppUsers[r].UserName;s="Hey "+s;this.getView().byId("idUser").setText(s)},createModel:function(){},getRouter:function(){return this.getOwnerComponent().getRouter()},_onRouteMatched:function(e){var t=this;t.clearScreen();var a=this.getView().getModel("local").getProperty("/printCustomizingData");this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/prints","GET",{},{},this).then(function(e){t.getView().setBusy(false);if(e.results.length>0){for(var a=0;a<e.results.length;a++){var r=e.results[a].Name;if(e.results[a].Value==="true"){var s=true;sap.ui.getCore().byId(r).setState(s)}else if(e.results[a].Value==="false"){var s=false;sap.ui.getCore().byId(r).setState(s)}else{var s=e.results[a].Value;sap.ui.getCore().byId(r).setValue(s)}}}}).catch(function(e){});this.getView().setBusy(false)},clearScreen:function(){var e=this;e.byId("idCompName").setValue("");e.byId("idAdd").setValue("")},updateData:function(e){var t=this;var a=t.getView().getModel("local").getProperty("/printCustomizingData");for(var r=0;r<e.results.length;r++){var s=e.results[r].id;this.getModel().update("/prints("+s+")",a,{success:function(){}})}},createData:function(e){var t=this;var a=t.getView().getModel("local").getProperty("/printCustomizingData");this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/prints","POST",{},a,this).then(function(e){}).catch(function(e){t.getView().setBusy(false);var a=t.getErrorMessage(e)})},onSubmit:function(e){var t=this;this.getView().setBusy(true);var a=e.getSource().getId();var r=e.getSource().mProperties.value;var s=this.getView().getModel("local").getProperty("/printCustomizingData");s.Name=a;if(e.getSource().mProperties.name=="switch"){var i=e.getSource().mProperties.state;s.Value=""+i+""}else{s.Value=e.getSource().mProperties.value}this.getView().getModel("local").setProperty("/printCustomizingData",s);var o=new sap.ui.model.Filter("Name","EQ",a);if(s.Value){this.ODataHelper.callOData(this.getOwnerComponent().getModel(),"/prints","GET",{filters:[o]},{},this).then(function(e){t.getView().setBusy(false);if(e.results.length>0){t.updateData(e)}else{t.createData(e)}}).catch(function(e){});this.getView().setBusy(false)}}})});