sap.ui.define(["victoria/controller/BaseController","sap/ui/model/json/JSONModel","sap/m/MessageToast"],function(e,t,o){"use strict";return e.extend("victoria.controller.reports",{onInit:function(){var e=this;var o=this.getModel("local").getProperty("/CurrentUser");var a=this.getModel("local").oData.AppUsers[o].UserName;a="Hey "+a;this.getView().byId("idUser").setText(a);var i=new t({id:"",City:"",CustomerCode:"",Name:""});this.setModel(i,"customerModel")},onPressKacchiDownload:function(){var e=this.getView().getModel("customerModel");var t="Kacchi";var o=e.oData.id;var a=e.oData.Name;var i=e.oData.City;window.open("/kaachiDownload?type=Kacchi&id="+o+"&name="+a+"&city="+i)},onPressStockDownload:function(){var e="Stock_Report";window.open("/stockDownload?type=Stock_Report")},onPressEntryDownload:function(){var e=this.getView().getModel("customerModel");var t="Entry";var a=e.oData.id;var i=e.oData.Name;var r=e.oData.City;$.post("/entryDownload",{id:a,name:i,city:r,type:t}).then(function(e){o.show("Data downloaded successfully")},function(e){o.show("Data could not be downloaded")})},onPressBookingDownload:function(){var e=this.getView().getModel("customerModel");var t="Booking_Summary";var o=e.oData.id;var a=e.oData.Name;window.open("/bookingDownload?type=Booking_Summary&id="+o+"&name="+a)},onPressPOrderDownload:function(){var e=this.getView().getModel("customerModel");var t="Pending_Order_Summary";var a=e.oData.id;var i=e.oData.Name;var r=e.oData.City;$.get("/pOrderDownload").then(function(e){o.show("Data downloaded successfully")},function(e){o.show("Data could not be downloaded")})},onPressGWiseDownload:function(){var e="Group_Wise_Report";window.open("/groupWiseEntryDownload?type=Group_Wise_Report")},onPressCustCodeDownload:function(){window.open("/custCodeDownload?type=Customer_Codes")},onPressMaterialDownload:function(){var e="Materials";window.open("/materialDownload?type=Materials")},onPressCityDownload:function(){var e="City";window.open("/cityDownload?type=City")},onPressGroupDownload:function(){window.open("/groupsDownload?type=Groups")},onPressClear:function(){this.getView().byId("idCustomerCode").setValue("");this.getView().byId("idName").setText("");this.getView().byId("idCity").setText("")},customerCodeCheck:function(e){$(function(){$("input:text:first").focus();var e=$("input:text");e.bind("keypress",function(t){var o=t.which;if(o==13){t.preventDefault();var a=e.index(this)+1;$(":input:text:eq("+a+")").focus()}})});var t=this.getView().getModel("customerModel");var o=e.getParameter("selectedItem").getModel().getProperty(e.getParameter("selectedItem").getBindingContext().getPath());var a=o.CustomerCode;var i=this.getView().byId("idCustomerCode").getValue();var r=a;if(r.length>0){t.setProperty("/CustomerCode",o.CustomerCode);t.setProperty("/id",o.id);t.setProperty("/City",o.City);t.setProperty("/Name",o.Name);t.refresh()}else{t.getData().City="";t.getData().Name="";t.getData().id="";t.refresh()}},CustomerPopup:function(e){if(!this.searchPopup){this.searchPopup=new sap.ui.xmlfragment("victoria.fragments.popup",this);this.getView().addDependent(this.searchPopup);var t=this.getView().getModel("i18n").getProperty("customer");this.searchPopup.setTitle(t);this.searchPopup.bindAggregation("items",{path:"/Customers",template:new sap.m.DisplayListItem({id:"idCustPopup",label:"{CustomerCode}",value:"{Name}-{City}"})})}this.searchPopup.open()},onValueHelpRequest:function(){this.CustomerPopup()},onConfirm:function(e){var t=this.getView().getModel("local").getProperty("/editEntryData");var o=e.getParameter("selectedItem").getLabel();var a=e.getParameter("selectedItem").getValue();this.getView().byId("idCust").setValue(o);this.getView().byId("idCustText").setValue(a);t.Customer=e.getParameter("selectedItem").getBindingContextPath().split("'")[1];this.getView().getModel("local").getProperty("/editEntryData",t)}})});
//# sourceMappingURL=reports.controller.js.map